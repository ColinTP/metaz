- def new_bug_link(no)
  - '[<a href="https://github.com/griff/metaz/issues/' + no.to_s + '">' + no.to_s + "</a>]"
- def bug_link(no)
  - '[<a href="http://metaz.lighthouseapp.com/projects/43700/tickets/' + no.to_s + '">' + no.to_s + "</a>]"
<html>
%head
  %meta(http-equiv="content-type" content="text/html; charset=UTF-8")
  %title>What's new in MetaZ
  %link(href="main.css" type="text/css" rel="stylesheet")
  :css
    body {
      font-size: 11px;
    }
    table {
      width: 100%;
      font-size: 14px;
      border:1px dashed #CCC;
    }
    .table .header,
    table .header
     {
      background-color: #4DBD02;
    }
    table .contents
     {
      font-size: 11px;
    }
    
%body
  %table
    %tr
      %td.header
        %a(name="version-1.0a10")
          %b Changes in version 1.0a10
    %tr.contents
      %td
        %p
          Long overdue Alpha 10 of MetaZ fixes the problem with adding images that slipped into Alpha 9.
        
        %p
          It also fixes issues with TagChimp results sometimes not getting shown and limits the number of
          concurrent poster downloads to 12 so as not to overload the CPU and internet connection when dealing with
          large number of posters.
          
        %p
          MetaZ now has basic AppleScript support so that you can open files and modify tags from a script.
        
        %p The complete list of changes are:
        %ul
          %li= "Fixed editable issue in the poster control #{new_bug_link(4)}"
          %li Removed MZRetain, MZRelease & MZCopyDescription because CF* ones works as well
          %li Added AEVTBuilder to externals
          %li Moved release related shell scripts out of xcode project to external files
          %li Removed gitattributes
          %li Moved away from out own custom uti for m4v files since that was causing problems of its own
          %li Added pragma mark to MZFileNameTextStorage
          %li Added a script name property to MZTag
          %li Added applescript record converter to MZTimeCode
          %li Added basic AppleScript support
          %li Added some test applescripts
          %li= "Merge pull request #{new_bug_link(23)} from slessard/11cb05ba72bf165649fe64e2f9689e58afc30348"
          %li Merge branch 'develop' of github.com:griff/metaz into develop
          %li Removed gitattributes
          %li Moved release related shell scripts out of xcode project to external files
          %li Moved away from out own custom uti for m4v files since that was causing problems of its own
          %li Fixed small memory leak in ToolTipButton
          %li Added getters for values, value names and localized value names of MZEnumTags
          %li Added helpers to make converting and supporting apple script easier
          %li Finished implementation of open command
          %li Finished the rough first version of applescript support
          %li Added class description comment to MZDateFormatter.h
          %li Fixed a small issue with pictureChanged value being wrong when app first starts because of NIB load order
          %li Limited the number of concurrent MZRemoteData operations to 12
          %li Fixed encoding problem in TagChimp search result
          %li Merge branch 'feature/applescript' into develop
          %li Moved selection down in file MetaZApplication to get rid of warning
          %li Changed tag value method a bit to get rid of warning
          %li Updated Bundle Version to include git commit hash
          %li Updated copyright year in Info.plist
          %li Removed SmartCrashReports keys from Info.plist since they are not used
          %li Added missing MZTimeCode.h import to MetaData.h
          %li Fixed a few memory leaks
          %li Fixed some problems in the sparkle_sign script
          %li Changed release shell scripts to use bash instead of sh
          %li Bumped version to 1.0a10
          %li Changed sparkle:version to CFBundleVersion from Info.plist
          %li Merge branch 'release/1.0a10'
          %li Fix several compiler/linker warnings/errors

        
  %table
    %tr
      %td.header
        %a(name="version-1.0a9")
          %b Changes in version 1.0a9
    %tr.contents
      %td
        %p
          By request we are pleased to release Alpha 9 of MetaZ that brings with it a whole host of bug fixes and some
          exciting new features.
          
        %p
          First off TheTVDB searching now retrieves season posters and UI is improved to let you select the one you prefer
          from all available posters. 
          
        %p A plugin for searching TheMovieDb.org has been added, greatly improving the ease with which movies can be tagged.
        
        %p All searching now supports caching which should bring with it some speed improvements.
          
        %p
          On the downside the Amazon plugin has been temporarily removed because it has been broken since october
          and we haven't gotten around to fixing it yet.
      
        %p The complete list of changes are:
        %ul
          %li Changed Sparkle url and switched on system profile
          %li Updated growl and switched to a MultiGrowl approach for loading it so we can support both mist and legacy
          %li Changed default time zone to UTC
          %li Added TheMovieDb searching
          %li Fixed problem in mp4chaps that caused it to crash with some files
          %li Added a filename changed checkbox to files table and got revertChanged to work on files table
          %li Changed status column to a dot like Mail
          %li= "Added support for two ISO 8601 date formats #{bug_link(39)} to all date fields; 2008-07-19 and 2008-07-19T00:00:00Z"
          %li Fixed apply search result to now use the picture selected in ui
          %li Fixed encoding problems in search results
          %li Added posters support to TheTVDB search plugin
          %li Added support for array of pictures to PictureEditor
          %li Fixed index error in MZFileNameTextStorage
          %li Changed TheTVDB search to use full series files
          %li Switched all http requests to ASIHttpRequest which means caching support
          %li Changed progress bar on main window to appear with an animation and not modify the window size
          %li Switched to MGViewAnimation
          %li Reworked credits to make it clearer when contributer is there because we simply used their code ie. they are not associated with or endorse MetaZ
          %li Cleaned up code the hides and shows main window progress bar and made it a little more robust
          %li Fixed dock icon file drop
  %table
    %tr
      %td.header
        %a(name="version-1.0a8")
          %b Changes in version 1.0a8
    %tr.contents
      %td
        %p
          After a long hiatus MetaZ is back with a new release that fixes issues with Lion and Power PC
          as well as support for having only the year as release date.
        %p
          We also now have an icon of our very own. Donated by
          %a{:href=>'http://www.partout.info'} Thomas Jakobi
          
        %p The complete list of changes are:
        %ul
          %li Made files table and presets table ignore newlines and reverse editing on escape
          %li Changed how words are defined for file name editing so it behaves more like renaming files in Finder (e.g. dot is a word separator)
          %li Fixed doubleClickAtIndex for file name editing
          %li Commit the edit before doing a search.
          %li Fixed small bug in picture context menu where show image editor option was disabled when picture was a RemoteData
          %li Added option to cancel editing by typing esc. for all UndoTableViews
          %li Changed MZDynamicObject so that it doesn't use NSInvocation when being called from getValueForKey and setValue:forKey
          %li Made identifier, localizedName and editorCell for class MZTag into properties
          %li Fixed small issue in MZPriorObserverFix that caused a great deal of unresponsiveness
          %li Added missing call to delegate dataProvider:controller:writeStartedForEdits: in APDataProvider
          %li Added hidden start column to chapter editor
          %li Added column menu to chapter editor
          %li Changed some getters into properties
          %li Added compare method to MZTimeCode
          %li Fixed small issue in web chapter parsing where chapters that lasted less than a minute were not supported
          %li= "Fixed chapter edit undo #{bug_link(12)}"
          %li Changed the rename preset undo action to "Rename Preset"
          %li Changed some privat class categories to extensions
          %li Changed building.txt to a README
          %li Added our TheTVDB API key to repository.
          %li Fixed return warning in MetaEdits
          %li Fixed tvdb view in browser and added menu items for view episode and view season
          %li Did a Build and Analyze and fixed the found problems
          %li Added fix for calling shell scripts in MZTaskOperation that messed with stdout
          %li Added icon from Thomas Jakobi
          %li Set new icon in Info.plist
          %li= "Updated mp4chaps to trunk-r479 and fixed missing ppc architecture #{bug_link(22)} #{bug_link(23)}"
          %li= "Lion issues should now be fixed #{bug_link(31)}"
          %li= "Changed tagchimp hostname from www.tagchimp.com to tagchimp.com because that is the CN in their certificate hopefully fixing #{bug_link(27)}"
          %li= "Fixed #{bug_link(29)} so now main window reopens when dropping a file or using open from main menu"
          %li Fixed memory problem in open that caused a crash because dictionary was released to early
          %li= "Changed open sheet to use file extensions instead of UTIs becaused it was causing problems with m4v extension #{bug_link(31)}"
          %li Changed small program icon used in search result to the new MetaZ icon
          %li Added icon credit
          %li= "Created my own DateFormatter to fix nil bug #{bug_link(9)}"
          %li Added a new category with a method for checking if all chars in a string are part of a given NSCharacterSet
          %li Added support for having only the year in date tag


  %table
    %tr
      %td.header
        %a(name="version-1.0a7")
          %b Changes in version 1.0a7
    %tr.contents
      %td
        %p Fixed problem with empty tagchimp result causing a crash
  %table
    %tr
      %td.header
        %a(name="version-1.0a6")
          %b Changes in version 1.0a6
    %tr.contents
      %td
        %p After a long wait finally a new version is ready for test.
        %p
          We have fixed a great number of bugs and made lots of little improvements but the biggest two things
          are: the addition of a plugin for searching 
          %a(href="http://www.thetvdb.com/") TheTVDB
          and that loading of files is now done asynchronous with a progress indicator.

        %p The complete list of changes are:
        %ul
          %li Fixed bug so that when keeping temporary file used when writing a move error doesn't occur
          %li Fixed bug so that now a queue item is marked as completed even when move or remove of temp file fails
          %li Fixed bug dock icon progressbar hidden state
          %li Added a whitespace to save temp file name
          %li Changed program output logging to only occur when actual output is generated
          %li Made credits file for about box and added copyright for Nigel
          %li Changed log so that system exceptions also end up there and improved the output format
          %li Made controller actually call didLoad and willUnload in MZPlugin
          %li Fixed small memory leak in AmazonSearchProvider
          %li Added release notes link, homepage link, send feedback item (that doesn't work) and view log to help menu
          %li Fixed exception in SearchMeta dealloc
          %li Made asynchronous loader
          %li Removed all windows from window list
          %li Fixed the static window list
          %li Made code remove year from end of filename before using it as title
          %li Made APWriteManager progress parsing more robust
          %li Started removing episode from tagChimp search result when there is no season number and episode is 0 to compensate for tagChimp bug
          %li Made read-only / pseudo tags like chapter names raise an exception when being set
          %li Fixed apply result chapter name bug
          %li Began parsing more of the ratings gotten from Amazon #{bug_link(14)}
          %li Redirected stdout to log file
          %li Changed hasChapters in MZSearchResult to return NSMultipleValuesMarker when there are only chapter names
          %li Added program name to program debug output
          %li Disabled title in default tv show search profile
          %li Removed search update delay
          %li Added full keypath support to NSUserDefaults
          %li Added key and keypath getters with default value to NSUserDefaults
          %li Fixed Search profile enable preferences bug
          %li Added track and disc read/write capability to AtomicParsley plugin #{bug_link(8)}
          %li Added preference for disabling automatic search #{bug_link(4)}
          %li Fixed 'Writing fails when setting non-string tags to nil' #{bug_link(16)}
          %li Added tool tip for enable auto-search preference
          %li Forced editing to be confirmed when loading a new file #{bug_link(7)}
          %li Made program wait for queue cancel to finish before terminating #{bug_link(3)}
          %li Updated build instructions and changed project so git doesn't have to be installed in /opt/local/bin
          %li Made some of MZTag thread-safe
          %li Moved logging defines to MZLogger.h
          %li Added a NSTask wrapper that extends NSOperation
          %li Changed some code to use CFBundle instead of NSBundle because of thread safety
          %li Made Amazon search perform a bit more like tagChimp search
          %li Added title back to default search terms for tv shows
          %li Made plugin load api async
          %li Added load and save NSOperationQueue's to PluginController
          %li Added output parse task class
          %li Added class that can control multiple NSOperation objects
          %li Changed AtomicParsley plugin to use async loading
          %li Renamed MZDataWriteController to MZDataController
          %li Added progress indicator for loading
          %li Refactored the write process to use NSTaskOperations
          %li Replaced all calls to NSFileManager defaultManager with one that creates a new NSFileManager
          %li Moved the responsibility of removing the temp file from plugin to MZWriteQueueStatus
          %li Moved APReadOperationController to framework
          %li Made plugin for TheTVDB #{bug_link(1)}
          %li Changed how headers are found so there can be two with name Access.h
          %li Changed a lot of header references from quoted form to angle-bracket form
          %li Stopped PosterView from beeping when pressing enter is a valid key stroke
          %li Added tag definitions for IMDB, ASIN, dvd season and dvd episode
          %li Renamed isFinished and isExecuting properties to finished and executing respectively
          %li Made finished and executing also send change notifications for "isFinished" and "isExecuting" since NSOperation dependencies uses these
          %li Added search queue to plugin controller
          %li Split MZRESTSearch into classes MZRESTOperation, MZRESTSearch and MZRESTSearchResult
          %li Added statusCode property to REST wrapper so we can ignore data when not relevant
          %li Removed non working code that scheduled REST wrapper on main runloop and made code always send request from main thread
          %li Made accessing the operations queue for MZRemoteData thread-safe
          %li Reordered code for AtomicParsley data read operations so they now are in sequence
          %li Deleted a lot of unused code en TCSearch
          %li Made loadData call in MZRemoteData detect and always start the load en on the main thread
          %li Added links to Lighthouse to the help menu
          %li Stopped using copies of strings for url encoding in rest wrapper
          %li Added plugin enable/disable functionality and put UI for it in preferences
          %li Added bundle property to MZPlugin
          %li Fixed small problem in plugin label where TheTVDB got the label "TheTVD B"
          %li Removed delete button from plugins preferences
          %li Changed initialize methods to work the right way
          %li Added some more debug log statements for searches
          %li Added call waitUntilFinished to MZOperationsController and MZRESTOperation
          %li Fixed race condition in search were controller was released before search completed
          %li Fixed bug in apply search result where chapter name is always set
          %li Fixed bug where queue run did not finish properly
          %li Changed mp4chaps to not fail when removing non-existing chapters from file
          %li Fixed bug where empty chapters array made write fail
          %li Added preference to specify what to do when put in trash fails
          %li Default to keeping the old file for above preference
          %li Changed keep functionality to rename the old file to filename+" Backup" so it's out of the way and we can rename the new file
          %li Reversed button positions for prompt alert for put in trash so that keep is the default option
          %li Added debug output to print command and arguments for all tasks
          %li Fixed trackNum bug so that now the episode no is actually written to track num
          %li Fixed bug where cancel was not handled properly in writing operations
          %li Added an artist value for TheTVDB results that contains the show name
          %li Moved loading of NSUserDefaults factory settings to main to fix MZWriteQueue initialization
          %li Fixed race condition in search plugins when canceling old search
          %li Improved response time in UI when selecting next or previous file in list and auto-search is enabled
          %li Fixed bug in the write cleanup code that caused file to not be moved to its final location when move to trash succeeded
  %table
    %tr
      %td.header <a name="version-1.0a5"><b>Changes in version 1.0a5</b></a>
    %tr.contents
      <td>  
      %p Made the following changes:
      %ul
        %li Chapter copy/paste
        %li Progressbar on dock icon
        %li Termination confirmations
        %li Added a great deal of keyboard shortcuts
  %table
    %tr
      %td.header <a name="version-0.8a"><b>Changes in version 0.8a</b></a>
    %tr.contents
      <td>  
      %p Made the following changes:
      %ul
        %li Growl notifications
        %li Undo in presets panel
        %li Undo for multiple file selection
        %li Added a full search result apply as proposed by Kevin Pratt
        %li Fixed support for 64 bit MPEG4 files
        %li Better error messages
        %li Fixed leopard support

  %table
    %tr
      %td.header
        %a(name="version-0.7a")
          %b Changes in version 0.7a
    %tr.contents
      %td
        %p The new and improved version now with Amazon US searching.
        %p Also made the following changes:
        %ul
          %li Changed search profiles so that title can be disabled like other search terms
          %li Fixed the MetaX presets video type import bug and added code to correct already imported presets
          %li Fixed x64 empty rating bug

  %table
    %tr
      %td.header
        %a(name="version-0.6a")
          %b Changes in version 0.6a
    %tr.contents
      %td
        %p Fixed critical queue stopping bug.

  %table
    %tr
      %td.header
        %a(name="version-0.5a")
          %b Changes in version 0.5a
    %tr.contents
      %td
        %p This is a minor update that fixes a few bugs and improves the UI.
        %ul
          %li Fixed a few bugs with rating and genre handling
          %li Fixed date reading both from AtomicParsley and TagChimp
          %li Cleaned up write queue and improved ui for status of tag write
  
  %table
    %tr
      %td.header
        %a(name="version-0.4a")
          %b Changes in version 0.4a
    %tr.contents
      %td
        %p Lots of changes but to mention a few:
        %ul
          %li TagChimp searching
          %li Presets
          %li Chapter writing
          %li Preferences
          %li Ratings
          %li Genre

  %table
    %tr
      %td.header
        %a(name="version-0.3a")
          %b Changes in version 0.3a
    %tr.contents
      %td
        %p Implemented write queue UI, drag &amp; drop, paste and services in files table.

  %table
    %tr
      %td.header
        %a(name="version-0.2a")
          %b Changes in version 0.2a
    %tr.contents
      %td
        %p Version 2 for test of Sparkle update

  %table
    %tr
      %td.header
        %a(name="version-0.1a")
          %b Changes in version 0.1a
    %tr.contents
      %td
        %p Version for test of Sparkle update

</html>